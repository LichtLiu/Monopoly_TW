<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>10x8 Monopoly Board with Pixel Art Characters - One Round</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
            font-family: Arial, sans-serif;
        }
        .game-container {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .board {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            grid-template-rows: repeat(8, 1fr);
            width: 1000px;
            height: 600px;
            background-color: #C1E1C1;
            border: 2px solid #000;
            position: relative;
        }
        .space {
            border: 1px solid #000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            font-size: 12px;
            padding: 5px;
        }
        .corner { background-color: #f9f9f9; font-weight: bold; }
        .property { background-color: #FFA07A; }
        .railroad { background-color: #C0C0C0; }
        .utility { background-color: #98FB98; }
        .tax { background-color: #FFB6C1; }
        .card { background-color: #87CEFA; }
        .character {
            width: 64px;
            height: 64px;
            position: absolute;
            transition: all 0.5s ease;
        }
        #controls { margin-top: 20px; }
        button { font-size: 16px; padding: 10px 20px; }
        #gameStatus { margin-top: 10px; font-weight: bold; }
        #currentCharacter {
            margin-bottom: 10px;
            font-size: 18px;
            font-weight: bold;
        }
        .character-indicator {
            display: inline-block;
            width: 32px;
            height: 32px;
            margin-right: 10px;
            vertical-align: middle;
        }
       
  
  
        #diceContainer {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 200px;
    height: 200px;
    perspective: 600px;
    z-index: 1000;
    display: none;
}

.dice {
    width: 100%;
    height: 100%;
    position: relative;
    transform-style: preserve-3d;
    transition: transform 1s;
}

.dice-face {
    position: absolute;
    width: 200px;
    height: 200px;
    border: 2px solid #000;
    background: white;
    display: flex;
    justify-content: center;
    align-items: center;
}

.dice-face.one { transform: rotateY(0deg) translateZ(100px); }
.dice-face.two { transform: rotateY(90deg) translateZ(100px); }
.dice-face.three { transform: rotateX(-90deg) translateZ(100px); }
.dice-face.four { transform: rotateX(90deg) translateZ(100px); }
.dice-face.five { transform: rotateY(-90deg) translateZ(100px); }
.dice-face.six { transform: rotateY(180deg) translateZ(100px); }

.dice-dot {
    display: block;
    width: 30px;
    height: 30px;
    border-radius: 50%;
    background-color: black;
    position: absolute;
}

/* One */
.one .dice-dot { top: 50%; left: 50%; transform: translate(-50%, -50%); }

/* Two */
.two .dice-dot:nth-child(1) { top: 25%; left: 25%; }
.two .dice-dot:nth-child(2) { bottom: 25%; right: 25%; }

/* Three */
.three .dice-dot:nth-child(1) { top: 25%; left: 25%; }
.three .dice-dot:nth-child(2) { top: 50%; left: 50%; transform: translate(-50%, -50%); }
.three .dice-dot:nth-child(3) { bottom: 25%; right: 25%; }

/* Four */
.four .dice-dot:nth-child(1) { top: 20%; left: 20%; }
.four .dice-dot:nth-child(2) { top: 20%; right: 20%; }
.four .dice-dot:nth-child(3) { bottom: 20%; left: 20%; }
.four .dice-dot:nth-child(4) { bottom: 20%; right: 20%; }

/* Five */
.five .dice-dot:nth-child(1) { top: 20%; left: 20%; }
.five .dice-dot:nth-child(2) { top: 20%; right: 20%; }
.five .dice-dot:nth-child(3) { top: 50%; left: 50%; transform: translate(-50%, -50%); }
.five .dice-dot:nth-child(4) { bottom: 20%; left: 20%; }
.five .dice-dot:nth-child(5) { bottom: 20%; right: 20%; }

/* Six */
.six .dice-dot:nth-child(1) { top: 20%; left: 20%; }
.six .dice-dot:nth-child(2) { top: 20%; right: 20%; }
.six .dice-dot:nth-child(3) { top: 50%; left: 20%; transform: translateY(-50%); }
.six .dice-dot:nth-child(4) { top: 50%; right: 20%; transform: translateY(-50%); }
.six .dice-dot:nth-child(5) { bottom: 20%; left: 20%; }
.six .dice-dot:nth-child(6) { bottom: 20%; right: 20%; }

.dice-rolling {
    animation: rolling 0.5s linear infinite;
}

@keyframes rolling {
    0% { transform: rotateX(0deg) rotateY(0deg); }
    100% { transform: rotateX(360deg) rotateY(360deg); }
}
  
  
  /* question card */
  .modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.4);
}

.modal-content {
    background-color: white;
    margin: 10% auto; /* Changed from 15% to 10% to move it up */
    padding: 20px;
    border: 1px solid #888;
    width: 400px;
    height: 600px;
    border-radius: 15px;
    font-size: 30px;
    position: relative;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}

#questionTitle {
    text-align: center;
    margin-bottom: 20px;
}

#questionText {
    text-align: center;
}

.close {
    color: #aaa;
    position: absolute;
    top: 10px;
    right: 25px;
    font-size: 35px;
    font-weight: bold;
    cursor: pointer;
}

.close:hover,
.close:focus {
    color: #000;
    text-decoration: none;
    cursor: pointer;
}  
  
  #resetButton {
    position: absolute;
    top: 10px;
    right: 10px;
    font-size: 14px;
    padding: 5px 10px;
    cursor: pointer;
    z-index: 100;
}
  
            </style>
</head>
<body>
  <button id="resetButton" onclick="resetGame()">Reset Game</button>
  <div class="game-container">
    <div class="game-container">
        <div id="currentCharacter"></div>
        <div class="board">
            <!-- Updated board spaces for 10x8 grid -->
            <div class="space corner">GO</div>
            <div class="space property">Mediterranean Avenue</div>
            <div class="space card">Community Chest</div>
            <div class="space property">Baltic Avenue</div>
            <div class="space tax">Income Tax</div>
            <div class="space railroad">Reading Railroad</div>
            <div class="space property">Oriental Avenue</div>
            <div class="space card">Chance</div>
            <div class="space property">Vermont Avenue</div>
            <div class="space corner">Jail</div>
            
            <div class="space property">Connecticut Avenue</div>
            <div class="space" style="background-color: #FFF;"></div>
            <div class="space" style="background-color: #FFF;"></div>
            <div class="space" style="background-color: #FFF;"></div>
            <div class="space" style="background-color: #FFF;"></div>
            <div class="space" style="background-color: #FFF;"></div>
            <div class="space" style="background-color: #FFF;"></div>
            <div class="space" style="background-color: #FFF;"></div>
            <div class="space" style="background-color: #FFF;"></div>
            <div class="space property">St. Charles Place</div>
            
            <div class="space utility">Electric Company</div>
            <div class="space" style="background-color: #FFF;"></div>
            <div class="space" style="background-color: #FFF;"></div>
            <div class="space" style="background-color: #FFF;"></div>
            <div class="space" style="background-color: #FFF;"></div>
            <div class="space" style="background-color: #FFF;"></div>
            <div class="space" style="background-color: #FFF;"></div>
            <div class="space" style="background-color: #FFF;"></div>
            <div class="space" style="background-color: #FFF;"></div>
            <div class="space property">States Avenue</div>
            
            <div class="space property">Virginia Avenue</div>
            <div class="space" style="background-color: #FFF;"></div>
            <div class="space" style="background-color: #FFF;"></div>
            <div class="space" style="background-color: #FFF;"></div>
            <div class="space" style="background-color: #FFF;"></div>
            <div class="space" style="background-color: #FFF;"></div>
            <div class="space" style="background-color: #FFF;"></div>
            <div class="space" style="background-color: #FFF;"></div>
            <div class="space" style="background-color: #FFF;"></div>
            <div class="space railroad">Pennsylvania Railroad</div>
            
            <div class="space property">St. James Place</div>
            <div class="space" style="background-color: #FFF;"></div>
            <div class="space" style="background-color: #FFF;"></div>
            <div class="space" style="background-color: #FFF;"></div>
            <div class="space" style="background-color: #FFF;"></div>
            <div class="space" style="background-color: #FFF;"></div>
            <div class="space" style="background-color: #FFF;"></div>
            <div class="space" style="background-color: #FFF;"></div>
            <div class="space" style="background-color: #FFF;"></div>
            <div class="space property">Tennessee Avenue</div>
            
            <div class="space card">Community Chest</div>
            <div class="space" style="background-color: #FFF;"></div>
            <div class="space" style="background-color: #FFF;"></div>
            <div class="space" style="background-color: #FFF;"></div>
            <div class="space" style="background-color: #FFF;"></div>
            <div class="space" style="background-color: #FFF;"></div>
            <div class="space" style="background-color: #FFF;"></div>
            <div class="space" style="background-color: #FFF;"></div>
            <div class="space" style="background-color: #FFF;"></div>
            <div class="space property">New York Avenue</div>
            
            <div class="space corner">Free Parking</div>
            <div class="space property">Kentucky Avenue</div>
            <div class="space card">Chance</div>
            <div class="space property">Indiana Avenue</div>
            <div class="space property">Illinois Avenue</div>
            <div class="space railroad">B. & O. Railroad</div>
            <div class="space property">Atlantic Avenue</div>
            <div class="space utility">Water Works</div>
            <div class="space property">Marvin Gardens</div>
            <div class="space corner">Go To Jail</div>
        </div>
        <div id="controls">
            <button onclick="rollDice()" id="rollButton">Roll Dice</button>
        </div>
        <div id="gameStatus"></div>
    </div>
  </div>
  
  <div id="diceContainer">
    <div class="dice">
        <div class="dice-face one">
            <span class="dice-dot"></span>
        </div>
        <div class="dice-face two">
            <span class="dice-dot"></span>
            <span class="dice-dot"></span>
        </div>
        <div class="dice-face three">
            <span class="dice-dot"></span>
            <span class="dice-dot"></span>
            <span class="dice-dot"></span>
        </div>
        <div class="dice-face four">
            <span class="dice-dot"></span>
            <span class="dice-dot"></span>
            <span class="dice-dot"></span>
            <span class="dice-dot"></span>
        </div>
        <div class="dice-face five">
            <span class="dice-dot"></span>
            <span class="dice-dot"></span>
            <span class="dice-dot"></span>
            <span class="dice-dot"></span>
            <span class="dice-dot"></span>
        </div>
        <div class="dice-face six">
            <span class="dice-dot"></span>
            <span class="dice-dot"></span>
            <span class="dice-dot"></span>
            <span class="dice-dot"></span>
            <span class="dice-dot"></span>
            <span class="dice-dot"></span>
        </div>
    </div>
</div>
  
  <div id="questionModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2 id="questionTitle">Question</h2>
        <p id="questionText"></p>
    </div>
</div>
  
    <script>
        const boardSpaces = [
            0, 1, 2, 3, 4, 5, 6, 7, 8, 9,
            19, 29, 39, 49, 59, 69, 79,
            78, 77, 76, 75, 74, 73, 72, 71, 70,
            60, 50, 40, 30, 20, 10
        ];

        let characters = [
                {
            name: 'Fighter',
            svg: `
                <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
                    <!-- Helmet with horns -->
                    <rect x="10" y="4" width="12" height="6" fill="#808080"/>
                    <rect x="8" y="6" width="2" height="4" fill="#808080"/>
                    <rect x="22" y="6" width="2" height="4" fill="#808080"/>
                    <rect x="6" y="8" width="2" height="2" fill="#C0C0C0"/>
                    <rect x="24" y="8" width="2" height="2" fill="#C0C0C0"/>
                    
                    <!-- Face -->
                    <rect x="12" y="10" width="8" height="4" fill="#FDB863"/>
                    <rect x="14" y="12" width="2" height="2" fill="#000000"/>
                    <rect x="18" y="12" width="2" height="2" fill="#000000"/>
                    
                    <!-- Dark armor body -->
                    <rect x="10" y="14" width="12" height="10" fill="#505050"/>
                    <rect x="12" y="16" width="8" height="6" fill="#606060"/>
                    
                    <!-- Arms -->
                    <rect x="8" y="14" width="2" height="8" fill="#505050"/>
                    <rect x="22" y="14" width="2" height="8" fill="#505050"/>
                    
                    <!-- Legs -->
                    <rect x="10" y="24" width="4" height="6" fill="#505050"/>
                    <rect x="18" y="24" width="4" height="6" fill="#505050"/>
                    
                    <!-- Large sword -->
                    <rect x="24" y="12" width="2" height="14" fill="#C0C0C0"/>
                    <rect x="23" y="26" width="4" height="2" fill="#C0C0C0"/>
                    <rect x="26" y="14" width="2" height="10" fill="#A0A0A0"/>
                </svg>
            `,
            position: 0,
            completed: false
        },
        {
    name: 'Crusader',
    svg: `
        <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
            <!-- Helmet -->
            <rect x="10" y="4" width="12" height="6" fill="#FFFFFF"/>
            <rect x="12" y="10" width="8" height="2" fill="#FFD700"/>
            
            <!-- Face -->
            <rect x="14" y="12" width="4" height="2" fill="#FDB863"/>
            <rect x="15" y="12" width="2" height="1" fill="#000000"/>
            
            <!-- White and red armor body -->
            <rect x="10" y="14" width="12" height="10" fill="#FFFFFF"/>
            <rect x="12" y="16" width="8" height="6" fill="#FF0000"/>
            <rect x="14" y="18" width="4" height="2" fill="#FFFFFF"/>
            
            <!-- Cloak -->
            <rect x="8" y="14" width="2" height="12" fill="#800000"/>
            <rect x="22" y="14" width="2" height="12" fill="#800000"/>
            
            <!-- Arms -->
            <rect x="8" y="14" width="2" height="8" fill="#FFFFFF"/>
            <rect x="22" y="14" width="2" height="8" fill="#FFFFFF"/>
            
            <!-- Legs -->
            <rect x="10" y="24" width="4" height="6" fill="#FFFFFF"/>
            <rect x="18" y="24" width="4" height="6" fill="#FFFFFF"/>
            
            <!-- Shield with cross -->
            <rect x="6" y="16" width="6" height="8" fill="#FFD700"/>
            <rect x="8" y="18" width="2" height="4" fill="#FF0000"/>
            <rect x="7" y="19" width="4" height="2" fill="#FF0000"/>
            
            <!-- Sword -->
            <rect x="24" y="14" width="2" height="10" fill="#C0C0C0"/>
            <rect x="23" y="24" width="4" height="2" fill="#C0C0C0"/>
        </svg>
    `,
    position: 0,
    completed: false
},
{
    name: 'White Knight',
    svg: `
        <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
            <!-- Horse body -->
            <rect x="4" y="18" width="20" height="10" fill="#FFFFFF"/>
            <rect x="24" y="20" width="4" height="8" fill="#FFFFFF"/>
            <rect x="2" y="20" width="2" height="8" fill="#FFFFFF"/>
            
            <!-- Horse legs -->
            <rect x="6" y="28" width="2" height="4" fill="#FFFFFF"/>
            <rect x="10" y="28" width="2" height="4" fill="#FFFFFF"/>
            <rect x="18" y="28" width="2" height="4" fill="#FFFFFF"/>
            <rect x="22" y="28" width="2" height="4" fill="#FFFFFF"/>
            
            <!-- Horse mane -->
            <rect x="20" y="16" width="6" height="4" fill="#E0E0E0"/>
            
            <!-- Knight body in shining silver armor -->
            <rect x="16" y="6" width="8" height="12" fill="#C0C0C0"/>
            <rect x="18" y="8" width="4" height="8" fill="#E0E0E0"/>
            
            <!-- Knight helmet -->
            <rect x="16" y="2" width="8" height="4" fill="#C0C0C0"/>
            <rect x="18" y="6" width="4" height="2" fill="#A0A0A0"/>
            
            <!-- Knight arms -->
            <rect x="14" y="8" width="2" height="6" fill="#C0C0C0"/>
            <rect x="24" y="8" width="2" height="6" fill="#C0C0C0"/>
            
            <!-- Flowing white cape -->
            <rect x="14" y="6" width="2" height="12" fill="#FFFFFF"/>
            <rect x="12" y="10" width="2" height="10" fill="#FFFFFF"/>
            <rect x="10" y="14" width="2" height="8" fill="#FFFFFF"/>
            
            <!-- Lance -->
            <rect x="26" y="2" width="2" height="18" fill="#A0A0A0"/>
            <polygon points="27,0 29,2 25,2" fill="#A0A0A0"/>
            
            <!-- Knight legs -->
            <rect x="16" y="18" width="4" height="4" fill="#C0C0C0"/>
            <rect x="20" y="18" width="4" height="4" fill="#C0C0C0"/>
        </svg>
    `,
    position: 0,
    completed: false
},
{
    name: 'Priest',
    svg: `
        <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
            <!-- Halo -->
            <circle cx="16" cy="6" r="5" fill="#FFD700" opacity="0.7"/>
            
            <!-- Head and face -->
            <rect x="12" y="6" width="8" height="8" fill="#FDB863"/>
            <rect x="14" y="10" width="2" height="2" fill="#000000"/>
            <rect x="18" y="10" width="2" height="2" fill="#000000"/>
            
            <!-- Beard -->
            <rect x="12" y="14" width="8" height="4" fill="#A0522D"/>
            <rect x="13" y="18" width="6" height="2" fill="#A0522D"/>
            
            <!-- Robe body - main color white with gold trim -->
            <rect x="10" y="18" width="12" height="12" fill="#FFFFFF"/>
            <rect x="9" y="18" width="1" height="12" fill="#FFD700"/>
            <rect x="22" y="18" width="1" height="12" fill="#FFD700"/>
            <rect x="10" y="29" width="12" height="1" fill="#FFD700"/>
            
            <!-- Arms -->
            <rect x="8" y="18" width="4" height="8" fill="#FFFFFF"/>
            <rect x="20" y="18" width="4" height="8" fill="#FFFFFF"/>
            
            <!-- Holy symbol (cross) -->
            <rect x="13" y="22" width="6" height="6" fill="#FFD700"/>
            <rect x="15" y="20" width="2" height="10" fill="#FFD700"/>
            
            <!-- Staff -->
            <rect x="23" y="10" width="2" height="20" fill="#8B4513"/>
            <rect x="22" y="8" width="4" height="2" fill="#8B4513"/>
            <circle cx="24" cy="7" r="2" fill="#FFD700"/>
            
            <!-- Glowing aura -->
            <rect x="0" y="0" width="32" height="32" fill="#FFFFFF" opacity="0.1"/>
        </svg>
    `,
    position: 0,
    completed: false
},
{
    name: 'Wizard',
    svg: `
        <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
            <!-- Pointed hat with stars -->
            <polygon points="16,0 10,12 22,12" fill="#4B0082"/>
            <rect x="10" y="12" width="12" height="2" fill="#4B0082"/>
            <rect x="13" y="5" width="2" height="2" fill="#FFD700"/>
            <rect x="18" y="8" width="2" height="2" fill="#FFD700"/>
            
            <!-- Face -->
            <rect x="12" y="14" width="8" height="6" fill="#FDB863"/>
            <rect x="14" y="16" width="2" height="2" fill="#000000"/>
            <rect x="18" y="16" width="2" height="2" fill="#000000"/>
            
            <!-- Long beard -->
            <rect x="12" y="20" width="8" height="8" fill="#A0A0A0"/>
            <rect x="13" y="28" width="6" height="2" fill="#A0A0A0"/>
            <rect x="14" y="30" width="4" height="2" fill="#A0A0A0"/>
            
            <!-- Robe body in purple -->
            <rect x="10" y="20" width="12" height="12" fill="#800080"/>
            <rect x="8" y="20" width="2" height="10" fill="#800080"/>
            <rect x="22" y="20" width="2" height="10" fill="#800080"/>
            
            <!-- Robe sleeves -->
            <rect x="6" y="20" width="2" height="8" fill="#800080"/>
            <rect x="24" y="20" width="2" height="8" fill="#800080"/>
            
            <!-- Staff -->
            <rect x="4" y="12" width="2" height="18" fill="#8B4513"/>
            <circle cx="5" cy="11" r="3" fill="#1E90FF"/>
            
            <!-- Spellbook -->
            <rect x="24" y="24" width="6" height="8" fill="#8B4513"/>
            <rect x="24" y="24" width="6" height="1" fill="#FFD700"/>
            <rect x="24" y="27" width="6" height="1" fill="#FFD700"/>
            <rect x="24" y="30" width="6" height="1" fill="#FFD700"/>
            
            <!-- Magical aura -->
            <rect x="0" y="0" width="32" height="32" fill="#1E90FF" opacity="0.1"/>
        </svg>
    `,
    position: 0,
    completed: false
}
        ];
  
        const questions = [
    "What is your favorite food?", // GO
    "Name a country you'd like to visit.", // Mediterranean Avenue
    "What's your favorite book?", // Community Chest
    "If you could have any superpower, what would it be?", // Baltic Avenue
    "What's your favorite movie?", // Income Tax
    "What's your dream job?", // Reading Railroad
    "If you could meet any historical figure, who would it be?", // Oriental Avenue
    "What's your favorite hobby?", // Chance
    "What's the best gift you've ever received?", // Vermont Avenue
    "If you could learn any skill instantly, what would it be?", // Jail
    
];

// Fill remaining spaces with a default question if needed
while (questions.length < boardSpaces.length) {
    questions.push("What's your favorite color?");
}
  
  
  window.onload = function() {
    if (loadGameState()) {
        // If a saved state was loaded, update the board
        characters.forEach((character, index) => {
            updateCharacterPosition(index);
        });
        updateGameStatus();
        updateCurrentCharacterDisplay();
    
};

        let currentCharacter = 0;
        let gameOver = false;

        function resetGame() {
    localStorage.removeItem('monopolyGameState');
    location.reload();
}
  
        function createCharacters() {
            const boardElement = document.querySelector('.board');
            characters.forEach((character, index) => {
                const characterElement = document.createElement('div');
                characterElement.className = 'character';
                characterElement.id = `character-${index}`;
                characterElement.innerHTML = character.svg;
                boardElement.appendChild(characterElement);
                updateCharacterPosition(index);
            });
        }

        function updateCharacterPosition(characterIndex) {
            const character = characters[characterIndex];
            const characterElement = document.getElementById(`character-${characterIndex}`);
            const spaceIndex = boardSpaces[character.position];
            const spaceElement = document.querySelectorAll('.board .space')[spaceIndex];
            const rect = spaceElement.getBoundingClientRect();
            const boardRect = document.querySelector('.board').getBoundingClientRect();

            // Adjust position based on character index to avoid overlap
            const offset = 10 * (characterIndex % 3 - 1);
            characterElement.style.left = `${rect.left - boardRect.left + rect.width / 2 - 32 + offset}px`;
            characterElement.style.top = `${rect.top - boardRect.top + rect.height / 2 - 32 + (characterIndex < 3 ? -10 : 10)}px`;
        }
        
  
  
        function rollDice() {
      if (gameOver) {
          alert("The game is over. All characters have completed one round!");
          return;
      }
  
      const diceContainer = document.getElementById('diceContainer');
      const dice = diceContainer.querySelector('.dice');
      diceContainer.style.display = 'block';
      dice.classList.add('dice-rolling');
      
      setTimeout(() => {
          dice.classList.remove('dice-rolling');
          const roll = Math.floor(Math.random() * 6) + 1;
          
          // Set the final rotation of the dice
          switch(roll) {
              case 1: dice.style.transform = 'rotateX(0deg) rotateY(0deg)'; break;
              case 2: dice.style.transform = 'rotateY(-90deg)'; break;
              case 3: dice.style.transform = 'rotateX(90deg)'; break;
              case 4: dice.style.transform = 'rotateX(-90deg)'; break;
              case 5: dice.style.transform = 'rotateY(90deg)'; break;
              case 6: dice.style.transform = 'rotateX(180deg)'; break;
          }
          
          setTimeout(() => {
              diceContainer.style.display = 'none';
              moveCharacter(roll);
          }, 1500);
      }, 1000);
  }
  
  
  function moveCharacter(roll) {
    const character = characters[currentCharacter];
    const previousPosition = character.position;
    character.position = (character.position + roll) % boardSpaces.length;
    
    updateCharacterPosition(currentCharacter);
    
    const spaceIndex = boardSpaces[character.position];
    const spaceName = document.querySelectorAll('.board .space')[spaceIndex].textContent;
    
    let message = `${character.name} rolled a ${roll} and moved to ${spaceName}`;
    
    // Check if the character has passed or landed on GO
    if (previousPosition > character.position || character.position === 0) {
        character.completed = true;
        message += ". This character has completed one round!";
    }

    showQuestion(spaceIndex);
    saveGameState();
}

function showQuestion(spaceIndex) {
    const modal = document.getElementById('questionModal');
    const questionText = document.getElementById('questionText');
    
    questionText.textContent = questions[spaceIndex];
    modal.style.display = "block";
}
  
function continueGame() {
    checkGameStatus();
    
    if (!gameOver) {
        do {
            currentCharacter = (currentCharacter + 1) % characters.length;
        } while (characters[currentCharacter].completed);
    }

    updateGameStatus();
    updateCurrentCharacterDisplay();
    saveGameState();
}


// Close the modal when clicking on <span> (x)
document.querySelector('.close').onclick = function() {
    const modal = document.getElementById('questionModal');
    modal.style.display = "none";
    continueGame();
}

// Close the modal if the user clicks outside of it
window.onclick = function(event) {
    const modal = document.getElementById('questionModal');
    if (event.target == modal) {
        modal.style.display = "none";
        continueGame();
    }
}
      
       function saveGameState() {
    const gameState = {
        characters: characters,
        currentCharacter: currentCharacter,
        gameOver: gameOver
    };
    localStorage.setItem('monopolyGameState', JSON.stringify(gameState));
}

function loadGameState() {
    const savedState = localStorage.getItem('monopolyGameState');
    if (savedState) {
        const gameState = JSON.parse(savedState);
        characters = gameState.characters;
        currentCharacter = gameState.currentCharacter;
        gameOver = gameState.gameOver;
        return true;
    }
    return false;
}
  
  
  
  
        function checkGameStatus() {
            if (characters.every(character => character.completed)) {
                gameOver = true;
                document.getElementById('rollButton').disabled = true;
            }
        }

        function updateGameStatus() {
            const statusElement = document.getElementById('gameStatus');
            if (gameOver) {
                statusElement.textContent = "Game Over! All characters have completed one round.";
            } else {
                const completedCharacters = characters.filter(character => character.completed).length;
                statusElement.textContent = `${completedCharacters} out of ${characters.length} characters have completed the round.`;
            }
        }

        function updateCurrentCharacterDisplay() {
            const currentCharacterElement = document.getElementById('currentCharacter');
            if (!gameOver) {
                currentCharacterElement.innerHTML = `
                    <div class="character-indicator">${characters[currentCharacter].svg}</div>
                    Current Turn: ${characters[currentCharacter].name}
                `;
            } else {
                currentCharacterElement.textContent = "Game Over!";
            }
        }
    </script>
</body>
</html>
